# üîí Security Best Practices for PlacementIQ

## ‚ö†Ô∏è CRITICAL: Never Commit These Files!

### üö´ Files That Must NEVER Be Committed to Git:

1. **Environment Files**
   - `.env`
   - `backend/.env`
   - `frontend/.env`
   - Any `.env.*` files (except `.env.example`)

2. **Secret Keys & Credentials**
   - `*secret*` or `*SECRET*` files
   - `*.key`, `*.pem`, `*.p12`, `*.pfx`
   - `credentials.json`, `config.json` with secrets
   - Any files containing JWT secrets, API keys, or passwords

3. **Database Files**
   - `*.db`, `*.sqlite`, `*.sqlite3`
   - MongoDB dump files
   - Database backup files

4. **Deployment Configurations**
   - `.vercel/` (generated by Vercel CLI)
   - `.railway/`, `.render/`, `.heroku/`
   - Any platform-specific deployment files with secrets

## ‚úÖ Security Checklist Before Deployment

### Before Committing Code:

- [ ] Run `git status` and verify no `.env` files are staged
- [ ] Check that `.gitignore` is properly configured
- [ ] Verify no hardcoded secrets in code (search for "mongodb://", "mongodb+srv://", "SECRET", "API_KEY")
- [ ] Ensure all secrets use environment variables
- [ ] Review `git diff` before committing

### Before Pushing to GitHub:

- [ ] Confirm `.env` files are in `.gitignore`
- [ ] Verify `.env.example` has placeholder values only (no real secrets)
- [ ] Check that no secrets are in commit messages
- [ ] Review full `git log --patch` if unsure

### Production Deployment:

- [ ] Use strong, randomly generated JWT_SECRET_KEY (minimum 32 characters)
- [ ] Use MongoDB Atlas or secure database with authentication
- [ ] Set CORS_ORIGINS to specific domain (not `*`)
- [ ] Enable HTTPS for all production URLs
- [ ] Rotate secrets regularly (every 90 days recommended)
- [ ] Use platform environment variables (Vercel, Railway, Render secrets)
- [ ] Never use default/example secrets in production

## üîë How to Generate Secure Secrets

### JWT Secret Key (Required for Backend):

```bash
# Option 1: Python
python -c "import secrets; print(secrets.token_urlsafe(32))"

# Option 2: OpenSSL
openssl rand -base64 32

# Option 3: Node.js
node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
```

### Example Output:
```
X7Ks9pQ3mN2vB8cD4rT6yU1wE5aL0oP9iJ8hG7fS6d
```

## üõ°Ô∏è What to Do If You Accidentally Commit Secrets

### If you haven't pushed yet:

```bash
# Remove from staging
git reset HEAD backend/.env frontend/.env

# Amend the last commit
git commit --amend --no-edit
```

### If you already pushed to GitHub:

1. **Immediately rotate all exposed secrets** (change MongoDB password, regenerate JWT secret)
2. **Remove from git history** using BFG Repo-Cleaner or git filter-repo:

```bash
# Install git-filter-repo (recommended method)
pip install git-filter-repo

# Remove .env files from entire history
git filter-repo --path backend/.env --invert-paths
git filter-repo --path frontend/.env --invert-paths

# Force push to overwrite remote history
git push origin --force --all
```

3. **Notify all collaborators** to re-clone the repository (their local copies will have old history)

## üìù Environment Variable Setup Guide

### Local Development:

1. Copy `.env.example` to `.env`:
   ```bash
   cp .env.example backend/.env
   ```

2. Edit `backend/.env` and fill in real values:
   ```bash
   MONGO_URL=mongodb://localhost:27017
   JWT_SECRET_KEY=<generate-using-command-above>
   ```

3. Create `frontend/.env`:
   ```bash
   echo "REACT_APP_BACKEND_URL=http://localhost:8000" > frontend/.env
   ```

### Production Deployment:

#### Vercel (Frontend):
- Go to Project Settings ‚Üí Environment Variables
- Add: `REACT_APP_BACKEND_URL=https://your-backend.com`

#### Railway/Render (Backend):
- Go to Environment Variables section
- Add:
  - `MONGO_URL=mongodb+srv://user:password@cluster.mongodb.net/placementiq_db`
  - `JWT_SECRET_KEY=<your-strong-random-secret>`
  - `CORS_ORIGINS=https://your-frontend.vercel.app`

## üîç How to Check for Exposed Secrets

### Scan your repository:

```bash
# Check if .env files are tracked
git ls-files | grep "\.env$"

# Search for potential secrets in code
grep -r "mongodb://" --exclude-dir=node_modules --exclude-dir=.git
grep -r "SECRET.*=" --exclude-dir=node_modules --exclude-dir=.git
grep -r "API_KEY" --exclude-dir=node_modules --exclude-dir=.git

# Check git history for .env files
git log --all --full-history --diff-filter=A --name-only --pretty=format: -- "*.env"
```

### Use GitHub Secret Scanning:
- GitHub automatically scans public repositories for exposed secrets
- Check Security ‚Üí Secret scanning alerts
- Respond immediately to any alerts

## üìß What to Do If GitHub Sends a Secret Alert

1. **Don't panic** - but act quickly
2. **Rotate the exposed secret immediately**
3. **Remove from git history** (see above)
4. **Update all deployments** with new secrets
5. **Review access logs** for unauthorized usage

## üéØ Best Practices Summary

1. ‚úÖ **Always use `.env` files** for secrets (never hardcode)
2. ‚úÖ **Keep `.env.example`** with placeholder values for documentation
3. ‚úÖ **Use strong random secrets** (minimum 32 characters)
4. ‚úÖ **Different secrets for dev/staging/production**
5. ‚úÖ **Rotate secrets regularly** (every 90 days)
6. ‚úÖ **Review commits** before pushing
7. ‚úÖ **Use platform environment variables** in production
8. ‚úÖ **Enable GitHub secret scanning**
9. ‚úÖ **Limit CORS origins** in production (no `*`)
10. ‚úÖ **Use HTTPS** for all production URLs

## üö® Emergency Contacts

If you discover a security vulnerability:
- **DO NOT** create a public GitHub issue
- Email the repository owner directly
- Provide details about the vulnerability privately

---

**Remember:** Security is everyone's responsibility! When in doubt, ask before committing. üîê
